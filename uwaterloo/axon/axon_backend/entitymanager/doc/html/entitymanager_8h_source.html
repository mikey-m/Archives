<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Axon::EntityManager: src/entitymanager.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Axon::EntityManager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/entitymanager.h</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * entitymanager.h</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> *  Created on: 2011-12-03</span>
<a name="l00005"></a>00005 <span class="comment"> *      Author: Michael Morckos &lt;mmorckos@uwaterloo.ca&gt;</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef ENTITYMANAGER_H_</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define ENTITYMANAGER_H_</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;queue&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;Ice/Ice.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;IceUtil/IceUtil.h&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;backendinterfacer.h&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;serviceprofiler.h&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;./util/datarecord.h&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;./protobufdata/entityprofile.pb.h&quot;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="keyword">class </span><a class="code" href="class_state.html">State</a>;
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="class_entity_manager.html">00024</a> <span class="keyword">class </span><a class="code" href="class_entity_manager.html">EntityManager</a>
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="keyword">public</span>:
<a name="l00028"></a>00028   <a class="code" href="class_back_end_interfacer.html">BackEndInterfacer</a> backendInterfacer;
<a name="l00029"></a>00029   <a class="code" href="class_service_profiler.html">ServiceProfiler</a> serviceProfiler;
<a name="l00030"></a>00030 
<a name="l00036"></a>00036   <a class="code" href="class_entity_manager.html#acf01da32302e672fd6861173ef0868e9" title="Constructor.">EntityManager</a> (<span class="keyword">const</span> Ice::LoggerPtr&amp; logger, <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00037"></a>00037 
<a name="l00040"></a>00040   <a class="code" href="class_entity_manager.html#a71a36c9fb8d579a1a1ec108e0fccf175" title="Destructor.">~EntityManager</a> ();
<a name="l00041"></a>00041 
<a name="l00049"></a>00049   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a348a51b80de5fd73630453ff7e6619c3" title="Initialze the manager.">init</a> (std::string uuid);
<a name="l00050"></a>00050 
<a name="l00053"></a>00053   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#adab74621a02364b983c1b66200e1a004" title="Executes the current state.">exec</a> ();
<a name="l00054"></a>00054 
<a name="l00059"></a>00059   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a6902055a9c186a53f92a7c3121fb2ba2" title="Initializes connection with the entity.">openEntityConn</a> ();
<a name="l00060"></a>00060 
<a name="l00063"></a>00063   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a8244ddb9e886db0375a7edc8372c4a62" title="Closes socket connection with the entity.">resetEntityConn</a> ();
<a name="l00064"></a>00064 
<a name="l00069"></a>00069   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#aa1d876a81b27019b996bbe771213fd97" title="Checks the current status of the entity.">probeStatus</a> (std::string *status);
<a name="l00070"></a>00070 
<a name="l00075"></a>00075   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a4bb5d20fcd2195b41855e06493762d2a" title="Sets the status of entity connection.">setEntityOnline</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00076"></a>00076 
<a name="l00081"></a>00081   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ae9747771733282adf241177bc1a99066" title="Returns the status of entity connection.">getEntityOnline</a> ();
<a name="l00082"></a>00082 
<a name="l00087"></a>00087   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a795b6c25aa6ab294d97864ca613a5037" title="Sets the status of server connection.">setConnected</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00088"></a>00088 
<a name="l00093"></a>00093   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a450040b326466ba35f644b2e1f1549e1" title="Returns the status of server connection.">getConnected</a> ();
<a name="l00094"></a>00094 
<a name="l00099"></a>00099   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#aa076d050d48651da4b515025997f582c" title="Sets permission to establish connection with the server.">setConnectSignal</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00100"></a>00100 
<a name="l00105"></a>00105   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a90dbc8bb0466e298e267e72db98800cc" title="Returns the current permission to establish connection with the server.">getConnectSignal</a> ();
<a name="l00106"></a>00106 
<a name="l00111"></a>00111   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a1841dc62b4a582d37d2d05b73a78fe32" title="Signals whether there is a pending check-out request or not.">setRequested</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00112"></a>00112 
<a name="l00117"></a>00117   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a7a240232ee6d4a413cdfbe5457ccddda" title="Checks if there is a pending check-out request.">getRequested</a> ();
<a name="l00118"></a>00118 
<a name="l00123"></a>00123   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#addfda297062540cc148576b4c159b765" title="Signals that entity is released.">setReleased</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00124"></a>00124 
<a name="l00129"></a>00129   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ac3b3ea9a1dba7380c77a081d95e24325" title="Checks whether the entity was released or not.">getReleased</a> ();
<a name="l00130"></a>00130 
<a name="l00135"></a>00135   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a6a3caba4fb09630c01cfd0c528d17774" title="Sets the checked-out status of the entity.">setCheckedOut</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00136"></a>00136 
<a name="l00141"></a>00141   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#aefb9aae9d7909776fb76d96bcee91496" title="Gets the checked-out status of the entity.">getCheckedOut</a> ();
<a name="l00142"></a>00142 
<a name="l00147"></a>00147   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#add555325f87686688f1a75597f1a581d" title="Toggles collaboration mode.">toggleCollaborationMode</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00148"></a>00148 
<a name="l00153"></a>00153   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a64390a81cb5d4a435010f6ad605fd335" title="Checks if entity is in collaboration mode.">collaborationMode</a> ();
<a name="l00154"></a>00154 
<a name="l00159"></a>00159   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#abf748f2ea26f1aac5a61b97680b76b81" title="Toggles slave mode.">toggleSlaveMode</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00160"></a>00160 
<a name="l00165"></a>00165   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a0b108d635d353fe5c8b1188652d01c56" title="Checks if entity is in slave mode.">slaveMode</a> ();
<a name="l00166"></a>00166 
<a name="l00172"></a>00172   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a361a5256b771171f3054770e8924bac9" title="Toggles stop signal.">toggleStop</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag, <span class="keyword">const</span> std::string&amp; msg = <span class="stringliteral">&quot;&quot;</span>);
<a name="l00173"></a>00173 
<a name="l00179"></a>00179   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a8828442b93c4a0fde448e5d4b0f3b573" title="Checks if there is a pending stop signal.">stopSignal</a> (std::string *msg);
<a name="l00180"></a>00180 
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#afe49799626b219f84afa5a9233416156" title="Sets whether the entity is the initiator of a collaboration mode.">setInitiator</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00187"></a>00187 
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a3939d80dd00921061931e377cbf7157b" title="Checks if the entity is the initiator of a collaboration mode.">getInitiator</a> ();
<a name="l00194"></a>00194 
<a name="l00199"></a>00199   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a3e29584c2fadc2b896619d75f801fe11" title="Sets the UUID of the current controlling client.">setClientUuid</a> (<span class="keyword">const</span> std::string&amp; uuid);
<a name="l00200"></a>00200 
<a name="l00205"></a>00205   <span class="keyword">const</span> std::string&amp; <a class="code" href="class_entity_manager.html#a35fb821a1782bcfa4bca6618bd6ce3c4" title="Returns the UUID of the current controlling client.">getClientUuid</a> ();
<a name="l00206"></a>00206 
<a name="l00211"></a>00211   <span class="keyword">const</span> std::string&amp; <a class="code" href="class_entity_manager.html#ace1b8c3eaafb90ad046bb8c571aa0aba" title="Returns the UUID of the current controlling client.">getUuid</a> ();
<a name="l00212"></a>00212 
<a name="l00217"></a>00217   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a29656d132eedbc54a7301cc358ccca45" title="Sets the UUID of the master entity in a collaboration mode.">setCollaboratorUuid</a> (<span class="keyword">const</span> std::string&amp; uuid);
<a name="l00218"></a>00218 
<a name="l00223"></a>00223   <span class="keyword">const</span> std::string&amp; <a class="code" href="class_entity_manager.html#a0e6f6adb73dddabea2e703a891a17b55" title="Gets the UUID of the master entity in a collaboration mode.">getCollaboratorUuid</a> ();
<a name="l00224"></a>00224 
<a name="l00230"></a>00230   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a9a8ea85b60e0f719be9d6a88880b0948" title="Loads the entity basic profile.">loadBasicPrfl</a> (<span class="keyword">const</span> std::string&amp; fileUrl);
<a name="l00231"></a>00231 
<a name="l00236"></a>00236   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a8984e606e8de0139a095b91f7c137842" title="Loads the entity basic profile.">getBasisPrflData</a> (std::string *data);
<a name="l00237"></a>00237 
<a name="l00243"></a>00243   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a593216b8d043b674c9b770f7ae16e447" title="Loads the entity services profile.">loadServicesProfile</a> (<span class="keyword">const</span> std::string&amp; fileUrl);
<a name="l00244"></a>00244 
<a name="l00247"></a>00247   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a6f76ff797e1472b016157798f4c3308d" title="Packs the entire services profile.">compileSvcProfile</a> ();
<a name="l00248"></a>00248 
<a name="l00253"></a>00253   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a31653fc2e4d6f4a425e1a385c7abc85a" title="Sets the count of the current service profile data record.">setSvcPrflCount</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count);
<a name="l00254"></a>00254 
<a name="l00259"></a>00259   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a8ba19dd29d5109b75c59021fc92a2add" title="Gets the count of the current service profile data record.">getSvcPrflCount</a> ();
<a name="l00260"></a>00260 
<a name="l00265"></a>00265   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a971dfa43ddbbc052cab13ee972d7d773" title="Gets the count of the current service profile data record.">getCounter</a> ();
<a name="l00266"></a>00266 
<a name="l00271"></a>00271   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a37c0666b35894537b446fe11702ab278" title="Pushes a service profile data record onto the queue.">addSvcDataRecord</a> (<span class="keyword">const</span> <a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a>&amp; svcDataRecord);
<a name="l00272"></a>00272 
<a name="l00278"></a>00278   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a1c9ae8b566b92a633c40cbb47a99f276" title="Retrieves a service profile data from the queue (for transmission).">getSvcDataRecord</a> (<a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a> *svcDataRecord);
<a name="l00279"></a>00279 
<a name="l00287"></a>00287   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a676fbbc6e311bf2fe0842de964b4a532" title="Pushes a incoming message onto the incoming message queue.">addIncomingMsg</a> (<span class="keyword">const</span> std::string&amp; msg, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00288"></a>00288 
<a name="l00298"></a>00298   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#adbcc6ec62b24987b7c3d8536e8a650cf" title="Retrieves a message from the incoming queue (to be relayed to the entity).">getIncomingMsg</a> (std::string *msg, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00299"></a>00299 
<a name="l00307"></a>00307   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#ac7fc1c84e4ff7f8f41c6029df6028503" title="Pushes a data sequence onto the incoming data sequence queue.">addIncomingDataSeq</a> (<span class="keyword">const</span> std::vector &lt;std::string&gt;&amp; dataSeq, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00308"></a>00308 
<a name="l00318"></a>00318   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a84cb60bf7cc607bcd99556b8d2edc61e" title="Retrieves a data sequence from the incoming data sequence queue (to be relayed to the entity)...">getIncomingDataSeq</a> (std::vector &lt;std::string&gt; *dataSeq, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00319"></a>00319 
<a name="l00327"></a>00327   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a0d2a573b22e05aca11e288a1e41f3156" title="Pushes an incoming data record onto the incoming data record queue.">addIncomingDataRec</a> (<span class="keyword">const</span> <a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a>&amp; dataRec, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00328"></a>00328 
<a name="l00339"></a>00339   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a6e6a39fd2fb4f1dd9b130fc152928902" title="Retrieves a data record from the incoming data record queue (to be relayed to the entity)...">getIncomingDataRec</a> (<a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a> *dataRec, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00340"></a>00340 
<a name="l00349"></a>00349   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a067c2a016b3d36bc93d69bb7147582e8" title="Pushes a message onto the outgoing message queue.">addOutgoingMsg</a> (<span class="keyword">const</span> std::string&amp; msg, <span class="keyword">const</span> std::string&amp; msgType, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00350"></a>00350 
<a name="l00361"></a>00361   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ae0851c6cc671a5b4fcaf4d27c6e1f0e1" title="Retrieves a message from the outgoing message queue (to be transmitted).">getOutgoingMsg</a> (std::string *msg, std::string *msgType, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00362"></a>00362 
<a name="l00371"></a>00371   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a99cd02db063613a3258e4f59994121bb" title="Pushes a data sequence onto the outgoing data sequence queue.">addOutgoingDataSeq</a> (<span class="keyword">const</span> std::vector &lt;std::string&gt;&amp; dataSeq, <span class="keyword">const</span> std::string&amp; msgType,
<a name="l00372"></a>00372       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00373"></a>00373 
<a name="l00384"></a>00384   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ad74ac1651fb3f95689be22ecd6560e8c" title="Retrieves a data sequence from the outgoing data sequence queue (to be transmitted).">getOutgoingDataSeq</a> (std::vector &lt;std::string&gt; *dataSeq, std::string *msgType,
<a name="l00385"></a>00385       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00386"></a>00386 
<a name="l00395"></a>00395   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a1ff0de1e5153454f898ebcc878238ed7" title="Pushes a data record onto the outgoing data record queue.">addOutgoingDataRec</a> (<span class="keyword">const</span> <a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a>&amp; dataRec, <span class="keyword">const</span> std::string&amp; msgType,
<a name="l00396"></a>00396       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00397"></a>00397 
<a name="l00408"></a>00408   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a3612389f7d81872049754a03cd44c992" title="Retrieves a data record from the outgoing data record queue (to be transmitted).">getOutgoingDataRec</a> (<a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a> *dataRec, std::string *msgType, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00409"></a>00409 
<a name="l00418"></a>00418   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#aaa8ebe458f059f38714cfbe9b0611215" title="Pushes an entity message onto the outgoing entity message queue.">addOutgoingEntityMsg</a> (<span class="keyword">const</span> std::string&amp; msg, <span class="keyword">const</span> std::string&amp; msgType,
<a name="l00419"></a>00419       <span class="keyword">const</span> std::string&amp; destId);
<a name="l00420"></a>00420 
<a name="l00431"></a>00431   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ad4fc673052a887c77445fc2100d43f9a" title="Retrieves an entity message from the outgoing entity message queue (to be transmitted).">getOutgoingEntityMsg</a> (std::string *msg, std::string *msgType, std::string *destId);
<a name="l00432"></a>00432 
<a name="l00441"></a>00441   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a3c79c6fc7cafe362f84a30e5ec68e310" title="Pushes an entity data sequence onto the outgoing entity data sequence queue.">addOutgoingEntityDataSeq</a> (<span class="keyword">const</span> std::vector &lt;std::string&gt;&amp; dataSeq,
<a name="l00442"></a>00442       <span class="keyword">const</span> std::string&amp; msgType, <span class="keyword">const</span> std::string&amp; destId);
<a name="l00443"></a>00443 
<a name="l00455"></a>00455   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a30e109f4a080af603b76928882b282cd" title="Retrieves an entity data sequence from the outgoing entity data sequence queue (to be transmitted)...">getOutgoingEntityDataSeq</a> (std::vector &lt;std::string&gt; *dataSeq, std::string *msgType,
<a name="l00456"></a>00456       std::string *destId);
<a name="l00457"></a>00457 
<a name="l00465"></a>00465   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#adfa0c2d106401260e64f04f986a96520" title="Pushes a new task onto the task queue.">addNewTask</a> (std::vector &lt;std::string&gt;&amp; taskSeq, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00466"></a>00466 
<a name="l00476"></a>00476   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ac8b7daa5cde28ae974c21983351e5cb2" title="Retrieves a task from the task queue (to be relayed to the entity).">getPendingTask</a> (std::vector &lt;std::string&gt; *taskSeq, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00477"></a>00477 
<a name="l00485"></a>00485   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#aa93666b439c61fe81588fa29c31af7dc" title="Pushes a collaborative task onto the collaborative task queue.">addNewCollaborativeTask</a> (<a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a>&amp; dataRec, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00486"></a>00486 
<a name="l00496"></a>00496   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a09a5be47c3d40918da553e5987e7fabd" title="Retrieves a collaborative from the collaborative task queue.">getPendingCollaborativeTask</a> (<a class="code" href="class_util_1_1_data_record.html">Util::DataRecord</a> *dataRec, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type);
<a name="l00497"></a>00497 
<a name="l00508"></a>00508   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#aa9dfe39cf0ca9149517254a98ecea30d" title="Sends a message to the robotic application and retrieves a reply.">sendEntitySyncMsg</a> (<span class="keyword">const</span> std::string&amp; prefix, <span class="keyword">const</span> std::string&amp; body, std::string *reply);
<a name="l00509"></a>00509 
<a name="l00520"></a>00520   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#aa9dfe39cf0ca9149517254a98ecea30d" title="Sends a message to the robotic application and retrieves a reply.">sendEntitySyncMsg</a> (<span class="keyword">const</span> std::string&amp; prefix, <span class="keyword">const</span> std::string&amp; body, <span class="keywordtype">char</span> *reply,
<a name="l00521"></a>00521       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
<a name="l00522"></a>00522 
<a name="l00531"></a>00531   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a3d89ebf267445078222a96e215c24a0c" title="Signals if the entity manager is in an error state.">setErrState</a> (<span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; flag);
<a name="l00532"></a>00532 
<a name="l00541"></a>00541   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a87d8d35ea45c8367f668465297e886ca" title="Signals if the entity manager is in an error state.">getErrState</a> ();
<a name="l00542"></a>00542 
<a name="l00543"></a>00543   <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#ab1564ca48e94179c9bd6e6fc7126e309">dispatchToEntity</a> (std::string&amp; data, std::string *reply, <span class="keywordtype">bool</span> *taskFlag);
<a name="l00544"></a>00544 
<a name="l00547"></a>00547   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a900defb4d0e8238cd14d7d60c5ee60b9" title="Resets all parameters and configurations after a recent release.">releaseReset</a> ();
<a name="l00548"></a>00548 
<a name="l00552"></a>00552   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#afd4225e32dd487a408d422c8dc6ebaeb" title="Resets all parameters, configurations and connections after lossing connection with the entity applic...">resetAll</a> ();
<a name="l00553"></a>00553 
<a name="l00556"></a>00556   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a7f69fc9919cc5c635aa4a4ae40e441d7" title="Clears all pending client tasks.">clearPendingClientTasks</a> ();
<a name="l00557"></a>00557 
<a name="l00560"></a>00560   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a195ce10a1ff673d2a3032f0cbecbb8db" title="Clears all pending collaborative tasks (received from controlling client).">clearPendingClientCollaborativeTasks</a> ();
<a name="l00561"></a>00561 
<a name="l00565"></a>00565   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#acbf4277019464eaa04b1d7dd23261dfe" title="Clears all pending collaborative tasks (received from a collaborative entity).">clearPendingEntityTasks</a> ();
<a name="l00566"></a>00566 
<a name="l00569"></a>00569   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#a781f40ac8908efa14f05061141167781" title="Clears all queues and stored data.">clearAllData</a> ();
<a name="l00570"></a>00570 
<a name="l00573"></a>00573   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#abafcffad64a6bc17e04f13745c187305" title="Closes connection with entity.">closeEntityConn</a> ();
<a name="l00574"></a>00574 
<a name="l00577"></a>00577   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#ae0e95cbf036169ad5a42d8ba0c54348e" title="Peforms cleanup before shutdown.">close</a> ();
<a name="l00578"></a>00578 
<a name="l00586"></a>00586   <span class="keywordtype">void</span> <a class="code" href="class_entity_manager.html#af2b6d2bcc6f60b11e25926ed800dcd41" title="This function is used by the different states to log internal events and state transitions.">stateLog</a> (<span class="keyword">const</span> std::string&amp; state, <span class="keyword">const</span> std::string&amp; type, <span class="keyword">const</span> std::string&amp; msg);
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="keyword">protected</span>:
<a name="l00589"></a>00589   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_state.html">State</a>;
<a name="l00590"></a><a class="code" href="class_entity_manager.html#a97ab962018c25fae80386f2081c744e3">00590</a>   <a class="code" href="class_state.html">State</a> *<a class="code" href="class_entity_manager.html#a97ab962018c25fae80386f2081c744e3">currState</a>;                         
<a name="l00592"></a><a class="code" href="class_entity_manager.html#ac5266b0483c9b6082c359f4dad727533">00592</a>   <span class="keyword">const</span> std::string <a class="code" href="class_entity_manager.html#ac5266b0483c9b6082c359f4dad727533">PORTS_CFG</a>;             
<a name="l00593"></a><a class="code" href="class_entity_manager.html#a6a596bfcd066ba0b4df7e69260824a14">00593</a>   <span class="keyword">const</span> std::string <a class="code" href="class_entity_manager.html#a6a596bfcd066ba0b4df7e69260824a14">GENERAL_CFG</a>;           
<a name="l00594"></a><a class="code" href="class_entity_manager.html#aa3d269c64c765ad156aa51b7fc0e3527">00594</a>   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#aa3d269c64c765ad156aa51b7fc0e3527">PROFILE_CFG_COUNT</a>;    
<a name="l00595"></a><a class="code" href="class_entity_manager.html#a9aafb9275b1bff10f4978df07acd07a3">00595</a>   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a9aafb9275b1bff10f4978df07acd07a3">GENERAL_CFG_COUNT</a>;    
<a name="l00596"></a><a class="code" href="class_entity_manager.html#a78bc44531824506c854ddfc3abdc1912">00596</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a78bc44531824506c854ddfc3abdc1912">FIELD_NAME_CC</a>;              
<a name="l00597"></a><a class="code" href="class_entity_manager.html#a2ebbd267585b7364cdbbbe21f3625fdd">00597</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a2ebbd267585b7364cdbbbe21f3625fdd">FIELD_TYPE_CC</a>;              
<a name="l00598"></a><a class="code" href="class_entity_manager.html#a02fe71868d218765b8f91f6f63116b57">00598</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a02fe71868d218765b8f91f6f63116b57">FIELD_DESCR_CC</a>;             
<a name="l00600"></a><a class="code" href="class_entity_manager.html#af890c4775968cf5e424a7c0682aaf0fc">00600</a>   std::string <a class="code" href="class_entity_manager.html#af890c4775968cf5e424a7c0682aaf0fc">entityUuid</a>;               
<a name="l00601"></a><a class="code" href="class_entity_manager.html#a1aa000c3a5e42da44451be4f2765b3fe">00601</a>   std::string <a class="code" href="class_entity_manager.html#a1aa000c3a5e42da44451be4f2765b3fe">clientUuid</a>;               
<a name="l00602"></a><a class="code" href="class_entity_manager.html#ae7ce3447e4e38e93f9cb830700e3c6f3">00602</a>   std::string <a class="code" href="class_entity_manager.html#ae7ce3447e4e38e93f9cb830700e3c6f3">collaboratorEntityUuid</a>;   
<a name="l00603"></a><a class="code" href="class_entity_manager.html#ad8cb1796b4d8c3258c323cd26d63fad6">00603</a>   Data::BasicProfile <a class="code" href="class_entity_manager.html#ad8cb1796b4d8c3258c323cd26d63fad6">basicPrfl</a>;         
<a name="l00604"></a><a class="code" href="class_entity_manager.html#a64f65d831799e33c834e6b74bff7027c">00604</a>   std::string <a class="code" href="class_entity_manager.html#a64f65d831799e33c834e6b74bff7027c">basicPrflData</a>;            
<a name="l00605"></a><a class="code" href="class_entity_manager.html#a552dd0662d9d7c5166ea9dc7fec5fd59">00605</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#a552dd0662d9d7c5166ea9dc7fec5fd59">svcPrflCount</a>;            
<a name="l00606"></a><a class="code" href="class_entity_manager.html#af49110fa41331c077911bd2bc6a93cf9">00606</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_entity_manager.html#af49110fa41331c077911bd2bc6a93cf9">counter</a>;                 
<a name="l00607"></a><a class="code" href="class_entity_manager.html#a6897eb94b61a22232f8bb2c961c2a360">00607</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a6897eb94b61a22232f8bb2c961c2a360">entityOnline</a>;    
<a name="l00608"></a><a class="code" href="class_entity_manager.html#abbf6696a5dba07e2231162b23fda6b18">00608</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#abbf6696a5dba07e2231162b23fda6b18">connected</a>;       
<a name="l00609"></a><a class="code" href="class_entity_manager.html#a56861daa0457ce2e4048d096d0f17cb2">00609</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a56861daa0457ce2e4048d096d0f17cb2">connectSignal</a>;   
<a name="l00610"></a><a class="code" href="class_entity_manager.html#ae286df9d2913c80ead3aea4152274795">00610</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ae286df9d2913c80ead3aea4152274795">checkedOut</a>;      
<a name="l00611"></a><a class="code" href="class_entity_manager.html#a30a01a4695b918665c89f46e84aebaf1">00611</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a30a01a4695b918665c89f46e84aebaf1">requested</a>;       
<a name="l00612"></a><a class="code" href="class_entity_manager.html#a0f6536436a00657976d8df91a8c91b3e">00612</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a0f6536436a00657976d8df91a8c91b3e">released</a>;        
<a name="l00613"></a><a class="code" href="class_entity_manager.html#aea25bb11059c2d0b97914f44ef4f4c43">00613</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#aea25bb11059c2d0b97914f44ef4f4c43">collaboration</a>;   
<a name="l00614"></a><a class="code" href="class_entity_manager.html#a33703c68efd6e3d747a1d57368ac8e92">00614</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a33703c68efd6e3d747a1d57368ac8e92">slave</a>;           
<a name="l00615"></a><a class="code" href="class_entity_manager.html#ac7f4e53634fd684f6c3cfff77500c7db">00615</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#ac7f4e53634fd684f6c3cfff77500c7db">stop</a>;            
<a name="l00616"></a><a class="code" href="class_entity_manager.html#a4c8b7b34ad82363e9a1357106ef16f0e">00616</a>   std::string <a class="code" href="class_entity_manager.html#a4c8b7b34ad82363e9a1357106ef16f0e">stopMsg</a>;  
<a name="l00617"></a><a class="code" href="class_entity_manager.html#a596086e951801bc06664573f637d3cd9">00617</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a596086e951801bc06664573f637d3cd9">errState</a>;        
<a name="l00618"></a>00618 
<a name="l00619"></a><a class="code" href="class_entity_manager.html#a2ad474195926634fe469b33625c2a678">00619</a>   <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a2ad474195926634fe469b33625c2a678" title="FIXME Temporary fix.">initiator</a>;   
<a name="l00621"></a><a class="code" href="class_entity_manager.html#ac321aa0b2763bf8069ddbc96c9fde0d8">00621</a>   IceUtil::Mutex <a class="code" href="class_entity_manager.html#ac321aa0b2763bf8069ddbc96c9fde0d8">connMutex0</a>;    
<a name="l00622"></a><a class="code" href="class_entity_manager.html#a590eb203fa4fd559f2aab910cb20ccee">00622</a>   IceUtil::Mutex <a class="code" href="class_entity_manager.html#a590eb203fa4fd559f2aab910cb20ccee">connMutex1</a>;    
<a name="l00623"></a><a class="code" href="class_entity_manager.html#a962b3e92adaea60d95542ce8f4e5a543">00623</a>   IceUtil::Mutex <a class="code" href="class_entity_manager.html#a962b3e92adaea60d95542ce8f4e5a543">dataMutex</a>;     
<a name="l00624"></a><a class="code" href="class_entity_manager.html#a10f30302c98a56ce151baaf72d924b23">00624</a>   <span class="keyword">const</span> Ice::LoggerPtr <a class="code" href="class_entity_manager.html#a10f30302c98a56ce151baaf72d924b23">iceLogger_Ptr</a>; 
<a name="l00625"></a><a class="code" href="class_entity_manager.html#a3bc5f73d0e77cea10b5e588aa5485682">00625</a>   <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="class_entity_manager.html#a3bc5f73d0e77cea10b5e588aa5485682">logFlag</a>;                 
<a name="l00628"></a>00628   std::queue &lt;Util::DataRecord&gt; svcRecordQueue;
<a name="l00629"></a>00629   std::queue &lt;std::string&gt; incomingClientMsgQueue;
<a name="l00630"></a>00630   std::queue &lt;std::vector &lt;std::string&gt; &gt; incomingClientDataSeqQueue;
<a name="l00631"></a>00631   std::queue &lt;Util::DataRecord&gt; incomingClientDataRecQueue;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633   std::queue &lt;std::string&gt; incomingEnvironmentMsgQueue;
<a name="l00634"></a>00634   std::queue &lt;std::string&gt; incomingEntityMsgQueue;
<a name="l00635"></a>00635 
<a name="l00636"></a>00636   std::queue &lt;std::string&gt; outgoingClientMsgQueue;
<a name="l00637"></a>00637   std::queue &lt;std::string&gt; outgoingClientMsg_typeQueue;
<a name="l00638"></a>00638   std::queue &lt;std::vector &lt;std::string&gt; &gt; outgoingClientDataSeqQueue;
<a name="l00639"></a>00639   std::queue &lt;std::string&gt; outgoingClientDataSeq_typeQueue;
<a name="l00640"></a>00640   std::queue &lt;Util::DataRecord&gt; outgoingClientDataRecQueue;
<a name="l00641"></a>00641   std::queue &lt;std::string&gt; outgoingClientDataRec_typeQueue;
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   std::queue &lt;std::string&gt; outgoingEnvironmentMsgQueue;
<a name="l00644"></a>00644   std::queue &lt;std::string&gt; outgoingEnvironmentMsg_typeQueue;
<a name="l00645"></a>00645   std::queue &lt;std::vector &lt;std::string&gt; &gt; outgoingEnvironmentDataSeqQueue;
<a name="l00646"></a>00646   std::queue &lt;std::string&gt; outgoingEnvironmentDataSeq_typeQueue;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648   std::queue &lt;std::string&gt; outgoingEntityMsgQueue;
<a name="l00649"></a>00649   std::queue &lt;std::string&gt; outgoingEntityMsg_typeQueue;
<a name="l00650"></a>00650   std::queue &lt;std::string&gt; outgoingEntityMsg_destQueue;
<a name="l00651"></a>00651   std::queue &lt;std::vector &lt;std::string&gt; &gt; outgoingEntityDataSeqQueue;
<a name="l00652"></a>00652   std::queue &lt;std::string&gt; outgoingEntityDataSeq_typeQueue;
<a name="l00653"></a>00653   std::queue &lt;std::string&gt; outgoingEntityDataSeq_destQueue;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655   std::queue &lt;std::vector &lt;std::string&gt; &gt; pendingClientTaskQueue;
<a name="l00656"></a>00656   std::queue &lt;std::vector &lt;std::string&gt; &gt; pendingEntityTaskQueue;
<a name="l00657"></a>00657   std::queue &lt;Util::DataRecord&gt; pendingClientCollaborativeTaskQueue;
<a name="l00658"></a>00658 
<a name="l00659"></a>00659   <span class="keywordtype">void</span> switchState (<a class="code" href="class_state.html">State</a> *newState);
<a name="l00660"></a>00660 };
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 <span class="preprocessor">#endif </span><span class="comment">/* ENTITYMANAGER_H_ */</span>
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Aug 28 2012 21:12:17 for Axon::EntityManager by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
